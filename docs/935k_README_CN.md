# 935k ç”²åŸºåŒ–èŠ¯ç‰‡ CpGPT ä½¿ç”¨æŒ‡å—

## ðŸŽ‰ é‡è¦å‘çŽ°

**935k èŠ¯ç‰‡å°±æ˜¯ GPL33022 (EPICv2) å¹³å°ï¼**

è¿™æ„å‘³ç€æ‚¨å¯ä»¥ç›´æŽ¥ä½¿ç”¨ CpGPT çš„ EPICv2 æ”¯æŒæ¥åˆ†æž 935k æ•°æ®ï¼Œæ— éœ€ä»»ä½•é¢å¤–é…ç½®ã€‚

## ðŸ“Š æ”¯æŒçš„åŠŸèƒ½

ä½¿ç”¨ CpGPTï¼Œæ‚¨å¯ä»¥å¯¹ 935k æ•°æ®è¿›è¡Œä»¥ä¸‹åˆ†æžï¼š

### 1ï¸âƒ£ å¤šç»„ç»‡å™¨å®˜å¹´é¾„é¢„æµ‹
- é¢„æµ‹æ ·æœ¬çš„ç”Ÿç‰©å­¦å¹´é¾„
- æ”¯æŒå¤šç§ç»„ç»‡ç±»åž‹ï¼ˆè¡€æ¶²ã€ç»„ç»‡ç­‰ï¼‰
- è¾“å‡ºï¼šå¹´é¾„ï¼ˆå²ï¼‰

### 2ï¸âƒ£ ç™Œç—‡é¢„æµ‹
- æ£€æµ‹æ ·æœ¬æ˜¯å¦ä¸ºç™Œç—‡
- è¾“å‡ºç™Œç—‡æ¦‚çŽ‡ï¼ˆ0-1ï¼‰
- äºŒåˆ†ç±»ç»“æžœï¼ˆæ­£å¸¸/ç™Œç—‡ï¼‰

### 3ï¸âƒ£ äº”ç§è¡¨è§‚é—ä¼ æ—¶é’Ÿ
ä¸€æ¬¡è¿è¡ŒèŽ·å¾—5ç§æ—¶é’Ÿçš„é¢„æµ‹ï¼š
- **altumage**: å¹´é¾„é¢„æµ‹
- **dunedinpace**: è¡°è€é€Ÿåº¦ï¼ˆæ­£å¸¸å€¼çº¦100ï¼‰
- **grimage2**: GrimAge2 æ—¶é’Ÿ
- **hrsinchphenoage**: PhenoAge æ—¶é’Ÿ
- **pchorvath2013**: Horvath 2013 æ—¶é’Ÿ

### 4ï¸âƒ£ è¡€æµ†è›‹ç™½è´¨é¢„æµ‹
- é¢„æµ‹è¡€æµ†è›‹ç™½è´¨æ°´å¹³
- å¯ç”¨äºŽæ­»äº¡çŽ‡é£Žé™©è¯„ä¼°
- è¾“å‡ºï¼šæ ‡å‡†åŒ–è›‹ç™½è´¨å€¼

## ðŸš€ å¿«é€Ÿå¼€å§‹ï¼ˆ3æ­¥ï¼‰

### ç¬¬1æ­¥ï¼šå®‰è£… CpGPT

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/lcamillo/CpGPT.git
cd CpGPT

# å®‰è£…ä¾èµ–
poetry install

# æ¿€æ´»çŽ¯å¢ƒ
poetry shell
```

### ç¬¬2æ­¥ï¼šå‡†å¤‡æ•°æ®

æ‚¨çš„ 935k æ•°æ®åº”è¯¥æ˜¯ CSV æ ¼å¼ï¼š

```csv
sample_id,cg00000029,cg00000108,cg00000109,...
sample1,0.85,0.23,0.67,...
sample2,0.91,0.19,0.72,...
```

- ç¬¬ä¸€åˆ—ï¼šæ ·æœ¬ID
- å…¶ä»–åˆ—ï¼šæŽ¢é’ˆIDï¼ˆå¦‚ cg00000029ï¼‰
- å€¼ï¼šBetaå€¼ï¼ˆ0-1ä¹‹é—´ï¼‰

### ç¬¬3æ­¥ï¼šè¿è¡Œé¢„æµ‹

```bash
# ç¼–è¾‘è„šæœ¬ä¸­çš„æ•°æ®è·¯å¾„
# æ‰“å¼€ examples/935k_simple_prediction.py
# ä¿®æ”¹ç¬¬ 30 è¡Œï¼šRAW_DATA_PATH = "./data/ä½ çš„æ•°æ®.csv"

# è¿è¡Œé¢„æµ‹
python examples/935k_simple_prediction.py
```

## ðŸ“ è¾“å‡ºç»“æžœ

è¿è¡Œå®ŒæˆåŽï¼Œåœ¨ `results/935k_predictions/` ç›®å½•ä¸‹ä¼šç”Ÿæˆï¼š

1. **age_predictions.csv** - å¹´é¾„é¢„æµ‹ç»“æžœ
   ```csv
   sample_id,predicted_age
   sample1,45.2
   sample2,38.7
   ```

2. **cancer_predictions.csv** - ç™Œç—‡é¢„æµ‹ç»“æžœ
   ```csv
   sample_id,cancer_logit,cancer_probability,cancer_prediction
   sample1,-2.3,0.09,0
   sample2,1.8,0.86,1
   ```

3. **clocks_predictions.csv** - 5ç§è¡¨è§‚é—ä¼ æ—¶é’Ÿ
   ```csv
   sample_id,altumage,dunedinpace,grimage2,hrsinchphenoage,pchorvath2013
   sample1,45.1,98.5,47.2,44.8,46.3
   sample2,39.2,102.3,40.1,38.5,39.8
   ```

4. **proteins_predictions.csv** - è›‹ç™½è´¨é¢„æµ‹ç»“æžœ

5. **combined_predictions.csv** - æ‰€æœ‰é¢„æµ‹çš„æ±‡æ€»

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

ç¼–è¾‘ `examples/935k_simple_prediction.py` ä¸­çš„é…ç½®ï¼š

```python
# é€‰æ‹©è¦è¿è¡Œçš„é¢„æµ‹
PREDICT_AGE = True          # å¹´é¾„é¢„æµ‹
PREDICT_CANCER = True       # ç™Œç—‡é¢„æµ‹
PREDICT_CLOCKS = True       # è¡¨è§‚é—ä¼ æ—¶é’Ÿ
PREDICT_PROTEINS = True     # è›‹ç™½è´¨é¢„æµ‹

# æ€§èƒ½é…ç½®
MAX_INPUT_LENGTH = 30000    # å¦‚æžœå†…å­˜ä¸è¶³ï¼Œé™ä½Žæ­¤å€¼ï¼ˆå¦‚ 15000ï¼‰
USE_CPU = False             # è®¾ç½®ä¸º True ä½¿ç”¨ CPUï¼ˆæ›´ç¨³å®šä½†æ›´æ…¢ï¼‰
```

## ðŸŒ Web ç•Œé¢

å¦‚æžœæ‚¨æ›´å–œæ¬¢å›¾å½¢ç•Œé¢ï¼š

```bash
cd webapp
python app.py

# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ http://localhost:8000
# ä¸Šä¼ æ‚¨çš„ 935k CSV æ–‡ä»¶
# ç‚¹å‡»"å¼€å§‹åˆ†æž"
```

Web ç•Œé¢æä¾›ï¼š
- ðŸ“¤ æ–‡ä»¶ä¸Šä¼ 
- ðŸŽ¯ é€‰æ‹©é¢„æµ‹ç±»åž‹
- ðŸ“Š å¯è§†åŒ–å›¾è¡¨
- ðŸ“„ HTML åˆ†æžæŠ¥å‘Š
- ðŸ’¾ ç»“æžœä¸‹è½½

## ðŸ’¡ æŠ€æœ¯åŽŸç†

### ä¸ºä»€ä¹ˆ 935k å¯ä»¥ç›´æŽ¥ä½¿ç”¨ï¼Ÿ

1. **å¹³å°è¯†åˆ«**: 935k ä½¿ç”¨ GPL33022 å¹³å°IDï¼Œè¿™å°±æ˜¯ EPICv2
2. **æŽ¢é’ˆæ˜ å°„**: CpGPT åŒ…å«å®Œæ•´çš„ EPICv2 æŽ¢é’ˆåˆ°åŸºå› ç»„ä½ç½®çš„æ˜ å°„
3. **DNA åµŒå…¥**: æ¨¡åž‹åŸºäºŽåŸºå› ç»„ä½ç½®è€ŒéžæŽ¢é’ˆIDï¼Œå¯æ³›åŒ–åˆ°ä»»ä½•å¹³å°
4. **é¢„è®­ç»ƒæ¨¡åž‹**: æ‰€æœ‰æ¨¡åž‹éƒ½åœ¨å¤šå¹³å°æ•°æ®ä¸Šè®­ç»ƒï¼ŒåŒ…æ‹¬ EPICv2

### æ•°æ®å¤„ç†æµç¨‹

```
935k CSV æ•°æ®
    â†“
è½¬æ¢ä¸º Arrow æ ¼å¼
    â†“
æŽ¢é’ˆID â†’ åŸºå› ç»„ä½ç½® (EPICv2 manifest)
    â†“
åŸºå› ç»„ä½ç½® â†’ DNA åºåˆ—åµŒå…¥
    â†“
è¿‡æ»¤åŒ¹é…æ¨¡åž‹è¯æ±‡è¡¨çš„ä½ç‚¹
    â†“
CpGPT æ¨¡åž‹æŽ¨ç†
    â†“
è¾“å‡ºé¢„æµ‹ç»“æžœ
```

## â“ å¸¸è§é—®é¢˜

### Q: éœ€è¦å¤šå°‘æ ·æœ¬æ‰èƒ½è¿è¡Œï¼Ÿ
**A**: 1ä¸ªæ ·æœ¬å°±å¯ä»¥ï¼è¿™æ˜¯é›¶æ ·æœ¬æŽ¨ç†ï¼Œä¸éœ€è¦è®­ç»ƒæ•°æ®ã€‚

### Q: é¢„æµ‹å‡†ç¡®å—ï¼Ÿ
**A**: æ¨¡åž‹åœ¨å¤šä¸ªå¹³å°ä¸Šè®­ç»ƒï¼Œå¯¹ EPICv2/935k æœ‰å¾ˆå¥½çš„æ³›åŒ–èƒ½åŠ›ã€‚å‡†ç¡®æ€§å–å†³äºŽæ•°æ®è´¨é‡å’Œæ ·æœ¬ç±»åž‹ã€‚

### Q: å†…å­˜ä¸è¶³æ€Žä¹ˆåŠžï¼Ÿ
**A**: 
- é™ä½Ž `MAX_INPUT_LENGTH`ï¼ˆå¦‚ä»Ž 30000 é™åˆ° 15000ï¼‰
- è®¾ç½® `USE_CPU = True`
- å‡å° `batch_size`

### Q: å¯ä»¥åªè¿è¡Œéƒ¨åˆ†é¢„æµ‹å—ï¼Ÿ
**A**: å¯ä»¥ï¼åœ¨è„šæœ¬ä¸­è®¾ç½®å¯¹åº”çš„ `PREDICT_*` å‚æ•°ä¸º `False`ã€‚

### Q: å¦‚ä½•è§£è¯»ç™Œç—‡é¢„æµ‹ç»“æžœï¼Ÿ
**A**: 
- `cancer_probability > 0.5`: é¢„æµ‹ä¸ºç™Œç—‡
- `cancer_probability < 0.5`: é¢„æµ‹ä¸ºæ­£å¸¸
- æ¦‚çŽ‡è¶ŠæŽ¥è¿‘0æˆ–1ï¼Œé¢„æµ‹è¶Šç¡®å®š


